<!DOCTYPE html>
<html>
    <head>
       <meta charset="UTF-8">
    <title>Nouvel appareil</title>
    <link rel="stylesheet" href="style_deployContract.css">
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/ethereumjs/browser-builds/dist/ethereumjs-tx/ethereumjs-tx-1.3.3.min.js"></script>
    <script type="text/javascript" src="abi.js"></script>
    <script type="module" src="abi.js"></script>


  
    </head>
    
    <body>
        
        <div class="wrapper">
            <div class="sidebar">
                <h2>My Repair</h2>
                <ul>
                    <li><a href="profilClient.html"><i class="fas fa-user-circle"></i>Profil client</a></li>
                    <li><a href="deployContract.html"><i class="fas fa-shopping-cart"></i>Nouvel appareil</a></li>
                    <li><a href="infoContrat.html"><i class="fas fa-list-ol"></i>Mes contrats</a></li>
                    
                </ul> 
            
            </div>
        </div>

            <div class="main_content">
                <div class="header">Ajout d'un nouvel appareil</div> 

                <div class="formulaire">
                    <form>
                        <table>
                            <div>
                                Catégorie d'appareil : 
                                <select name="Categorie" id = "cat_select" class = "custom-select" required>
                                    <option value="">--Choisissez une catégorie--</option>
                                    <option value="Froid">Froid</option>
                                    <option value="Chaud">Chaud</option>
                                    <option value="Climatisation">Climatisation</option>
                                </select>
                            </div>
                            <br></br>
                            <div>
                                Type d'appareil : 
                            <select name="Type" id = "type_select" class = "custom-select" required>
                                <option value="">--Choisissez un type d'appareil--</option>
                                <option value="Armoire à température négative">Armoire à température négative</option>
                                <option value="Armoire à température positive">Armoire à température positive</option>
                                <option value="Cellule de refroidissement">Cellule de refroidissement</option>
                                <option value="Grill">Grill</option>
                                <option value="Plaques">Plaques</option>
                                <option value="Four">Four</option>
                                <option value="Chauffe assiettes">Chauffe assiettes</option>
                                <option value="Bain Marie">Bain Marie</option>
                                <option value="Ventilateur">Ventilateur</option>
                            </select>
                            </div>
                            <br></br>
                            <div>
                                Marque : 
                                <input type="text" id="marque" required> </input>
                            </div>
                            <br></br>
                            <div>
                                Référence : 
                                <input type="text" id="ref" required> </input>
                            </div>
                            <br></br>
                            <div>
                                N° de série : 
                                <input type="text" id="n_serie" required> </input>
                            </div>
                        </table>
                    </form>
                    <br><br><br><br>
                    <button onclick = "deployContract()">Enregistrer les informations</button>

                </form>
                </div>

            </div>
        
            <script type="text/javascript">
                //var contractAddress = "0xbe6EAcD08851b26cdac57CE68938F72491D1918b"; //Adresse contrat déployé


                async function loadWeb3() {
                        if (window.ethereum) {
                            window.web3 = new Web3(window.ethereum);
                            window.ethereum.enable();
                        }
                    }    
                    
                async function loadContract(contractAddress) {
                        return await new window.web3.eth.Contract(ABI, contractAddress);
                    }
        
                async function deployContract() {
                    var account = await web3.eth.getAccounts();
                    account = account[0];

                    console.log(web3.eth.accounts.create());

                    const privateKey1 = new ethereumjs.Buffer.Buffer.from(accounts[0].key, 'hex');


                    //deploye contract
                    web3.eth.getTransactionCount(account,(err,txCount)=>{
                        //smart contract data 
                        const data = '0x60806040526040518060400160405280600b81526020017f52c3a97061726174696f6e000000000000000000000000000000000000000000815250600b90805190602001906200005192919062000364565b506040518060400160405280600b81526020017f4d61696e74656e616e6365000000000000000000000000000000000000000000815250600c90805190602001906200009f92919062000364565b506040518060400160405280600c81526020017f496e7374616c6c6174696f6e0000000000000000000000000000000000000000815250600d9080519060200190620000ed92919062000364565b506040518060400160405280600c81526020017f4d6f64696669636174696f6e0000000000000000000000000000000000000000815250600e90805190602001906200013b92919062000364565b506040518060400160405280600581526020017f202d2d3e20000000000000000000000000000000000000000000000000000000815250600f90805190602001906200018992919062000364565b506040518060400160405280600d81526020017f436174c3a9676f726965203a200000000000000000000000000000000000000081525060109080519060200190620001d792919062000364565b506040518060400160405280601281526020017f54797065206427617070617265696c203a200000000000000000000000000000815250601190805190602001906200022592919062000364565b506040518060400160405280600981526020017f4d6172717565203a200000000000000000000000000000000000000000000000815250601290805190602001906200027392919062000364565b506040518060400160405280600e81526020017f52c3a966c3a972656e6365203a2000000000000000000000000000000000000081525060139080519060200190620002c192919062000364565b506040518060400160405280601481526020017f4e756dc3a9726f2064652073c3a9726965203a20000000000000000000000000815250601490805190602001906200030f92919062000364565b503480156200031d57600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506200040a565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620003a757805160ff1916838001178555620003d8565b82800160010185558215620003d8579182015b82811115620003d7578251825591602001919060010190620003ba565b5b509050620003e79190620003eb565b5090565b5b8082111562000406576000816000905550600101620003ec565b5090565b612912806200041a6000396000f3fe608060405234801561001057600080fd5b50600436106101585760003560e01c80637213f70c116100c357806398bf9a5d1161007c57806398bf9a5d146103ff578063aa5761ac1461042f578063aacbf88b1461044d578063b7a3759d1461046b578063e1f97a741461049b578063e2ec6ec3146104b957610158565b80637213f70c1461033d5780637b9417c8146103595780637d4bab0d14610389578063833f1500146103a75780638ae1c4e9146103d75780638da5cb5b146103e157610158565b80632d9fff01116101155780632d9fff011461026b5780633250c2ae146102895780634300e8ef146102a5578063516d18b3146102c15780635c5ec9e0146102dd57806369dc9ff31461030d57610158565b80630c3321191461015d57806310cfcf861461018d57806315b40ec0146101ab57806316d8de4a146101db57806324953eaa1461020b578063286dd3f51461023b575b600080fd5b61017760048036038101906101729190611f78565b6104e9565b60405161018491906125d2565b60405180910390f35b610195610509565b6040516101a29190612608565b60405180910390f35b6101c560048036038101906101c0919061227a565b6105a7565b6040516101d291906125b7565b60405180910390f35b6101f560048036038101906101f09190611f78565b6105e3565b60405161020291906125d2565b60405180910390f35b61022560048036038101906102209190611ff5565b61075e565b60405161023291906125d2565b60405180910390f35b61025560048036038101906102509190611f78565b610834565b60405161026291906125d2565b60405180910390f35b6102736109b0565b6040516102809190612608565b60405180910390f35b6102a3600480360381019061029e9190612179565b610a4e565b005b6102bf60048036038101906102ba9190611fa1565b610d16565b005b6102db60048036038101906102d6919061208a565b610e27565b005b6102f760048036038101906102f29190611ff5565b611218565b60405161030491906125d2565b60405180910390f35b61032760048036038101906103229190611f78565b6112ee565b6040516103349190612608565b60405180910390f35b61035760048036038101906103529190612036565b61139e565b005b610373600480360381019061036e9190611f78565b6115a7565b60405161038091906125d2565b60405180910390f35b610391611721565b60405161039e91906125ed565b60405180910390f35b6103c160048036038101906103bc9190611ff5565b611727565b6040516103ce91906125d2565b60405180910390f35b6103df6117fd565b005b6103e96118e1565b6040516103f691906125b7565b60405180910390f35b61041960048036038101906104149190611f78565b611905565b60405161042691906125d2565b60405180910390f35b610437611925565b6040516104449190612608565b60405180910390f35b6104556119c3565b6040516104629190612608565b60405180910390f35b61048560048036038101906104809190611f78565b611a61565b60405161049291906125d2565b60405180910390f35b6104a3611bdd565b6040516104b09190612608565b60405180910390f35b6104d360048036038101906104ce9190611ff5565b611c7b565b6040516104e091906125d2565b60405180910390f35b60026020528060005260406000206000915054906101000a900460ff1681565b60098054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561059f5780601f106105745761010080835404028352916020019161059f565b820191906000526020600020905b81548152906001019060200180831161058257829003601f168201915b505050505081565b600481815481106105b457fe5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610674576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161066b906126ed565b60405180910390fd5b600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610759576001600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507f4741c5511fc437c24855318d451aae826bd116cd86820e6edac58574673aaff18260405161074c91906125b7565b60405180910390a1600190505b919050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146107ef576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107e6906126ed565b60405180910390fd5b60005b825181101561082e5761081783828151811061080a57fe5b6020026020010151610834565b1561082157600191505b80806001019150506107f2565b50919050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146108c5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108bc906126ed565b60405180910390fd5b600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16156109ab576000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507f08d57f893c6ec4bc04c3c651ab22e344730d1ed72af9ecd7372087e6bec554348260405161099e91906125b7565b60405180910390a1600190505b919050565b60078054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a465780601f10610a1b57610100808354040283529160200191610a46565b820191906000526020600020905b815481529060010190602001808311610a2957829003601f168201915b505050505081565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610aa457600080fd5b7fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe600d604051610ad4919061262a565b60405180910390a17fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe86604051610b0b9190612608565b60405180910390a17fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe85604051610b429190612608565b60405180910390a17fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe84604051610b799190612608565b60405180910390a17fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe83604051610bb09190612608565b60405180910390a17fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe82604051610be79190612608565b60405180910390a18560059080519060200190610c05929190611d51565b508460069080519060200190610c1c929190611d51565b508360079080519060200190610c33929190611d51565b508260089080519060200190610c4a929190611d51565b508160099080519060200190610c61929190611d51565b506001600a81905550610d0e8160098054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610d045780601f10610cd957610100808354040283529160200191610d04565b820191906000526020600020905b815481529060010190602001808311610ce757829003601f168201915b5050505050610d16565b505050505050565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610d6c57600080fd5b80600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209080519060200190610dbf929190611d51565b506004829080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610e7d57600080fd5b7fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe600e604051610ead919061262a565b60405180910390a184604051602001610ec69190612589565b604051602081830303815290604052805190602001206005604051602001610eee91906125a0565b6040516020818303038152906040528051906020012014610f4a577f6b8789b7bf336f9450726278d0fa4407f4f94917cf2fd9e7b55ba1b16f264aed60106005600f88604051610f41949392919061264c565b60405180910390a15b83604051602001610f5b9190612589565b604051602081830303815290604052805190602001206006604051602001610f8391906125a0565b6040516020818303038152906040528051906020012014610fdf577f6b8789b7bf336f9450726278d0fa4407f4f94917cf2fd9e7b55ba1b16f264aed60116006600f87604051610fd6949392919061264c565b60405180910390a15b82604051602001610ff09190612589565b60405160208183030381529060405280519060200120600760405160200161101891906125a0565b6040516020818303038152906040528051906020012014611074577f6b8789b7bf336f9450726278d0fa4407f4f94917cf2fd9e7b55ba1b16f264aed60126007600f8660405161106b949392919061264c565b60405180910390a15b816040516020016110859190612589565b6040516020818303038152906040528051906020012060086040516020016110ad91906125a0565b6040516020818303038152906040528051906020012014611109577f6b8789b7bf336f9450726278d0fa4407f4f94917cf2fd9e7b55ba1b16f264aed60136008600f85604051611100949392919061264c565b60405180910390a15b8060405160200161111a9190612589565b60405160208183030381529060405280519060200120600960405160200161114291906125a0565b604051602081830303815290604052805190602001201461119e577f6b8789b7bf336f9450726278d0fa4407f4f94917cf2fd9e7b55ba1b16f264aed60146009600f84604051611195949392919061264c565b60405180910390a15b84600590805190602001906111b4929190611d51565b5083600690805190602001906111cb929190611d51565b5082600790805190602001906111e2929190611d51565b5081600890805190602001906111f9929190611d51565b508060099080519060200190611210929190611d51565b505050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146112a9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112a0906126ed565b60405180910390fd5b60005b82518110156112e8576112d18382815181106112c457fe5b6020026020010151611a61565b156112db57600191505b80806001019150506112ac565b50919050565b60036020528060005260406000206000915090508054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156113965780601f1061136b57610100808354040283529160200191611396565b820191906000526020600020905b81548152906001019060200180831161137957829003601f168201915b505050505081565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff166113f457600080fd5b6001821315801561142557507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8212155b15611568576000600a541415611472577fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe600b604051611465919061262a565b60405180910390a16114b7565b6001600a5414156114b6577fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe600c6040516114ad919061262a565b60405180910390a15b5b81600a54146114ff5781600a819055507f7a00920a8ba8e5694e15f7e7f7affffafadb681ece377a861668ff39030fa621826040516114f691906125ed565b60405180910390a15b60005b8151811015611562577fc794ba7309753fe436d45098afb5cd41b757762ba510599b624e1f3f1900d5fe82828151811061153857fe5b602002602001015160405161154d9190612608565b60405180910390a18080600101915050611502565b506115a3565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161159a906126ad565b60405180910390fd5b5050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611638576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161162f906126ed565b60405180910390fd5b600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1661171c5760018060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507f9046ad459158063b4463db7c78236bb00abdcf44d8cc1310eb1b99a2d035ba298260405161170f91906125b7565b60405180910390a1600190505b919050565b600a5481565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146117b8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117af906126ed565b60405180910390fd5b60005b82518110156117f7576117e08382815181106117d357fe5b60200260200101516105e3565b156117ea57600191505b80806001019150506117bb565b50919050565b600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1661185357600080fd5b6001600a5414156118a4576000600a819055507f7a00920a8ba8e5694e15f7e7f7affffafadb681ece377a861668ff39030fa621600a5460405161189791906125ed565b60405180910390a16118df565b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118d6906126cd565b60405180910390fd5b565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60016020528060005260406000206000915054906101000a900460ff1681565b60058054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156119bb5780601f10611990576101008083540402835291602001916119bb565b820191906000526020600020905b81548152906001019060200180831161199e57829003601f168201915b505050505081565b60088054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611a595780601f10611a2e57610100808354040283529160200191611a59565b820191906000526020600020905b815481529060010190602001808311611a3c57829003601f168201915b505050505081565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611af2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611ae9906126ed565b60405180910390fd5b600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615611bd8576000600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507fdacfc11515e594e016ca1ecac75a938ee2d3ff265fa9d3c48d082c68c2e15ed282604051611bcb91906125b7565b60405180910390a1600190505b919050565b60068054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611c735780601f10611c4857610100808354040283529160200191611c73565b820191906000526020600020905b815481529060010190602001808311611c5657829003601f168201915b505050505081565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611d0c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611d03906126ed565b60405180910390fd5b60005b8251811015611d4b57611d34838281518110611d2757fe5b60200260200101516115a7565b15611d3e57600191505b8080600101915050611d0f565b50919050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10611d9257805160ff1916838001178555611dc0565b82800160010185558215611dc0579182015b82811115611dbf578251825591602001919060010190611da4565b5b509050611dcd9190611dd1565b5090565b5b80821115611dea576000816000905550600101611dd2565b5090565b600081359050611dfd81612897565b92915050565b600082601f830112611e1457600080fd5b8135611e27611e228261273a565b61270d565b91508181835260208401935060208101905083856020840282011115611e4c57600080fd5b60005b83811015611e7c5781611e628882611dee565b845260208401935060208301925050600181019050611e4f565b5050505092915050565b600082601f830112611e9757600080fd5b8135611eaa611ea582612762565b61270d565b9150818183526020840193506020810190508360005b83811015611ef05781358601611ed68882611f0f565b845260208401935060208301925050600181019050611ec0565b5050505092915050565b600081359050611f09816128ae565b92915050565b600082601f830112611f2057600080fd5b8135611f33611f2e8261278a565b61270d565b91508082526020830160208301858383011115611f4f57600080fd5b611f5a838284612844565b50505092915050565b600081359050611f72816128c5565b92915050565b600060208284031215611f8a57600080fd5b6000611f9884828501611dee565b91505092915050565b60008060408385031215611fb457600080fd5b6000611fc285828601611dee565b925050602083013567ffffffffffffffff811115611fdf57600080fd5b611feb85828601611f0f565b9150509250929050565b60006020828403121561200757600080fd5b600082013567ffffffffffffffff81111561202157600080fd5b61202d84828501611e03565b91505092915050565b6000806040838503121561204957600080fd5b600061205785828601611efa565b925050602083013567ffffffffffffffff81111561207457600080fd5b61208085828601611e86565b9150509250929050565b600080600080600060a086880312156120a257600080fd5b600086013567ffffffffffffffff8111156120bc57600080fd5b6120c888828901611f0f565b955050602086013567ffffffffffffffff8111156120e557600080fd5b6120f188828901611f0f565b945050604086013567ffffffffffffffff81111561210e57600080fd5b61211a88828901611f0f565b935050606086013567ffffffffffffffff81111561213757600080fd5b61214388828901611f0f565b925050608086013567ffffffffffffffff81111561216057600080fd5b61216c88828901611f0f565b9150509295509295909350565b60008060008060008060c0878903121561219257600080fd5b600087013567ffffffffffffffff8111156121ac57600080fd5b6121b889828a01611f0f565b965050602087013567ffffffffffffffff8111156121d557600080fd5b6121e189828a01611f0f565b955050604087013567ffffffffffffffff8111156121fe57600080fd5b61220a89828a01611f0f565b945050606087013567ffffffffffffffff81111561222757600080fd5b61223389828a01611f0f565b935050608087013567ffffffffffffffff81111561225057600080fd5b61225c89828a01611f0f565b92505060a061226d89828a01611dee565b9150509295509295509295565b60006020828403121561228c57600080fd5b600061229a84828501611f63565b91505092915050565b6122ac816127f2565b82525050565b6122bb81612804565b82525050565b6122ca81612810565b82525050565b60006122db826127cb565b6122e581856127d6565b93506122f5818560208601612853565b6122fe81612886565b840191505092915050565b6000612314826127cb565b61231e81856127e7565b935061232e818560208601612853565b80840191505092915050565b600081546001811660008114612357576001811461237d576123c1565b607f600283041661236881876127d6565b955060ff1983168652602086019350506123c1565b6002820461238b81876127d6565b9550612396856127b6565b60005b828110156123b857815481890152600182019150602081019050612399565b80880195505050505b505092915050565b6000815460018116600081146123e6576001811461240b5761244f565b607f60028304166123f781876127e7565b955060ff198316865280860193505061244f565b6002820461241981876127e7565b9550612424856127b6565b60005b8281101561244657815481890152600182019150602081019050612427565b82880195505050505b505092915050565b6000612464603c836127d6565b91507f6e6577537461747573206d757374206265202d31202864656164292c2030202860008301527f6f7574206f66206f7264657229206f7220312028776f726b696e6729000000006020830152604082019050919050565b60006124ca604e836127d6565b91507f556e652064656d616e6465206427696e74657276656e74696f6e20612064c3a960008301527f6ac3a020c3a974c3a92065666665637475c3a965202f2050617320642761707060208301527f617265696c206578697374616e740000000000000000000000000000000000006040830152606082019050919050565b60006125566018836127d6565b91507f4e6f7420617574686f72697a6564206f7065726174696f6e00000000000000006000830152602082019050919050565b60006125958284612309565b915081905092915050565b60006125ac82846123c9565b915081905092915050565b60006020820190506125cc60008301846122a3565b92915050565b60006020820190506125e760008301846122b2565b92915050565b600060208201905061260260008301846122c1565b92915050565b6000602082019050818103600083015261262281846122d0565b905092915050565b60006020820190508181036000830152612644818461233a565b905092915050565b60006080820190508181036000830152612666818761233a565b9050818103602083015261267a818661233a565b9050818103604083015261268e818561233a565b905081810360608301526126a281846122d0565b905095945050505050565b600060208201905081810360008301526126c681612457565b9050919050565b600060208201905081810360008301526126e6816124bd565b9050919050565b6000602082019050818103600083015261270681612549565b9050919050565b6000604051905081810181811067ffffffffffffffff8211171561273057600080fd5b8060405250919050565b600067ffffffffffffffff82111561275157600080fd5b602082029050602081019050919050565b600067ffffffffffffffff82111561277957600080fd5b602082029050602081019050919050565b600067ffffffffffffffff8211156127a157600080fd5b601f19601f8301169050602081019050919050565b60008190508160005260206000209050919050565b600081519050919050565b600082825260208201905092915050565b600081905092915050565b60006127fd8261281a565b9050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b83811015612871578082015181840152602081019050612856565b83811115612880576000848401525b50505050565b6000601f19601f8301169050919050565b6128a0816127f2565b81146128ab57600080fd5b50565b6128b781612810565b81146128c257600080fd5b50565b6128ce8161283a565b81146128d957600080fd5b5056fea2646970667358221220ee1cecb4dcfd4523db7eee45da88ef9118dad6d478c394ff5d2af3a3ca592f8864736f6c634300060c0033';
                        // create transaction object
                        const txObject = {
                            nonce : web3.utils.toHex(txCount),
                            gasLimite : web3.utils.toHex(1000000),
                            gasPrice : web3.utils.toHex(web3.utils.toWei('10','gwei')),
                            data : data
                        } 
                        //sign the transaction
                        const tx = new ethereumjs.Tx(txObject);
                        tx.sign(privateKey1);

                        const serializedTx = tx.serialize();
                        const raw = '0x'+ serializedTx.toString('hex');

                        //Broadcast the transaction
                        web3.eth.sendSignedTransaction(raw, (err, txHash)=>{
                            console.log('err:',err,"txHash:",txHash);
                        })
                    });
                    //recupération de contractAddress : à recupérer depuis le transactionHash (to:)
                    //window.contract = await loadContract(contractAddress);
                    //setInfoAppareil();
                }
        
                async function setInfoAppareil() {

                    const cat = document.getElementById('cat_select').value;
                    const a_type = document.getElementById('type_select').value;
                    const brand = document.getElementById('marque').value;
                    const ref = document.getElementById('ref').value;
                    const serial_n = document.getElementById('n_serie').value;
                     
                    console.log("cat =" + cat + ", a_type = " + a_type + ", brand= "+ brand +" ,ref = "+ ref + " ,serial_n = "+ serial_n);
                    const Appareil = await window.contract.methods.setAppareil(cat,a_type,brand,ref,serial_n).send({from: account});
                }
                
                loadWeb3();

            </script>
    



    
    </body>
</html>